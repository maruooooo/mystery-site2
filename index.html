<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç§‘å­¦æœæŸ»å®˜ï½ç«ç½å ±çŸ¥å™¨ã®è§£æ˜ï½</title>
<style>
body {
  font-family: "Hiragino Sans", "Noto Sans JP", sans-serif;
  background: #f8f9fa;
  color: #222;
  margin: 0;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #b22222;
}
.container {
  max-width: 700px;
  margin: 0 auto;
  background: #fff;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
input[type="text"] {
  width: 90%;
  padding: 8px;
  margin-top: 8px;
  font-size: 1em;
}
button {
  margin-top: 10px;
  padding: 8px 16px;
  font-size: 1em;
  border: none;
  border-radius: 8px;
  background: #007bff;
  color: #fff;
  cursor: pointer;
}
button:disabled {
  background: #ccc;
  cursor: not-allowed;
}
.hint, .next-action, .criminal {
  background: #f1f1f1;
  padding: 10px;
  border-left: 4px solid #007bff;
  margin-top: 10px;
}
.nav {
  text-align: center;
  margin-bottom: 10px;
}
.nav button {
  background: #6c757d;
  color: #fff;
  margin: 3px;
}
.nav button.active {
  background: #007bff;
}
img.icon {
  width: 60px;
  margin-top: 10px;
}
#truth {
  background: #fff3cd;
  border-left: 5px solid #ffc107;
  padding: 15px;
  margin-top: 15px;
  display: none;
}
</style>
</head>
<body>

<div class="container">
  <h1>ç§‘å­¦æœæŸ»å®˜ï½ç«ç½å ±çŸ¥å™¨ã®è§£æ˜ï½</h1>
  <p><strong>éŠã³æ–¹ï¼š</strong><br>
  å„å•é¡Œã«ç­”ãˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚<br>
  æ­£è§£ãªã‚‰ã€Œæ¬¡ã«ã‚„ã‚‹ã“ã¨ã€ã¨ã€ŒçŠ¯äººã®æƒ…å ±ã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>
  ä¸æ­£è§£ãªã‚‰ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãƒ’ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚<br>
  æ­£è§£ã—ã¦ã„ãªã„ã¨æ¬¡ã®å•é¡Œã«é€²ã‚ã¾ã›ã‚“ã€‚<br>
  å‰ã®å•é¡Œã«æˆ»ã£ã¦ç¢ºèªã‚‚å¯èƒ½ã§ã™ã€‚<br>
  è§£ç­”ã¯ã€Œã²ã‚‰ãŒãªã€ã¾ãŸã¯ã€Œæ¼¢å­—ã€ã§å…¥åŠ›ã—ã¦ã‚‚OKã§ã™ã€‚</p>

  <div class="nav" id="nav"></div>
  <div id="questions"></div>
  <div id="truth"></div>
</div>

<script>
const data = [
  { q: "å•é¡Œ1ï¼ç­”ãˆã¯ä½•ã‹ï¼Ÿï¼ˆã²ã‚‰ãŒãªã§è§£ç­”ï¼‰", 
    answer: ["ã‚ã„ã›ã„","æ˜è–"], 
    hint: "å•é¡Œé€šã‚Šã«è§£ã„ã¦ã¿ã¦ãã ã•ã„", 
    next: "å•é¡Œ2ã«æŒ‘æˆ¦ã™ã‚‹", 
    criminal: "æ˜è–é«˜æ ¡ã®æ•™å“¡ã¿ãŸã„ã " },
  { q: "å•é¡Œ2ï¼å›ç­”ã¯ä½•ã‹ï¼Ÿ", 
    answer: ["ã¡ã„ã‹ã‚"], 
    hint: "ã“ã®å‹•ç‰©ã«ã¯è¦å‰‡æ€§ãŒãƒ»ãƒ»ãƒ»ï¼Ÿ", 
    next: "1éšã§å°‘ã—æ—©ã„æ°—åˆ†ã®ãƒã‚¹ã‚¿ãƒ¼ã‚’æ¢ãã†", 
    criminal: "çŠ¯äººã¯ã¡ã„ã‹ã‚ãŒå¥½ãã¿ãŸã„ã " },
  { q: "å•é¡Œ3ï¼ã“ã®ãƒã‚¹ã‚¿ãƒ¼ã®æŒ‡ç¤ºã«ã¯ã©ã“ã«å‘ã‹ãˆã¨æ›¸ã„ã¦ã‚ã‚‹ï¼Ÿ", 
    answer: ["èŠ±å£‡","ã‹ã ã‚“"], 
    hint: "ãƒã‚¹ã‚¿ãƒ¼ã«ã¯ä¸å¯è§£ãªæ–‡å­—åˆ—ãŒãƒ»ãƒ»ãƒ»ï¼Ÿ", 
    next: "èŠ±å£‡ã¨ã„ãˆã°ã€èŠ±ãŒå’²ã„ã¦ã„ã‚‹å ´æ‰€ãŒã“ã®å­¦æ ¡ã«ã‚‚ã‚ã‚‹æ°—ãŒã™ã‚‹ãƒ»ãƒ»ãƒ»", 
    criminal: "çŠ¯äººã¯ç†ç§‘ã®å…ˆç”Ÿã§ã¯ãªã„ã‚ˆã†ã " },
  { q: "å•é¡Œ4ï¼èŠ±å£‡ã§å¾—ãŸã€ã‚ã„ã“ã¨ã°ã¯ãªã«ã‹ï¼Ÿ", 
    answer: ["ç«ç½å ±çŸ¥å™¨","ã‹ã•ã„ã»ã†ã¡ã"], 
    hint: "ã“ã®æŒ‡ä»¤ã®æ–‡ç« ã«ã¯é•å’Œæ„ŸãŒã‚ã‚‹ãªï¼", 
    next: "å®¹ç–‘è€…ã®æŒ‡ç´‹ã‚’æ¡å–ã—ã‚ˆã†ï¼ï¼ˆè·å“¡å®¤ã«è¡Œãã¨ãã¯å…ˆç”Ÿã«å¤±ç¤¼ã®ãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ï¼‰", 
    criminal: "çŠ¯äººã¯è·å“¡å®¤ã«ã„ã‚‹ã¿ãŸã„ã " },
  { q: "å•é¡Œ5ï¼çŠ¯äººã¯ã ã‚Œã‹ï¼ˆè‹—å­—ã®ã¿ï¼‰", 
    answer: ["éˆ´æœ¨","ã™ãšã"], 
    hint: "çŠ¯äººã®æŒ‡ç´‹æ¤œå‡ºã‚’è¡Œã„ã€çŠ¯äººã‚’ç‰¹å®šã—ã¦ä¸‹ã•ã„ã€‚", 
    next: "", 
    criminal: "" }
];

const truthText = `
<h2>ğŸ”äº‹ä»¶ã®çœŸç›¸</h2>
<p>ä»Šå›ã®äº‹ä»¶ã®çœŸç›¸ã¯çŠ¯äººã®è¶£å‘³ã§ã‚ã£ãŸã€‚<br>
çŠ¯äººã¯ã€ç«ç½å ±çŸ¥æ©Ÿã‚’æŠ¼ã™ã‚¹ãƒªãƒ«ã‚’å‘³ã‚ã„ãŸãã€èª°ã‚‚ã„ãªã„æ ¡èˆã«å¿ã³è¾¼ã‚“ã ã€‚<br>
ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ãã«æ‰‹è¢‹ã‚’ã¤ã‘ã‚‹ã®ã‚’å¿˜ã‚ŒãŸã“ã¨ã«æ°—ã¥ãã€ãã®å¾Œã¯éœ‡ãˆã¦æˆæ¥­ã‚’è¡Œã£ã¦ã„ãŸãã†ã€‚<br>
äº‹ä»¶ã‚’èª¿æŸ»ã—ã¦ã„ã‚‹ã¨ã€éå»ã«ã‚‚ä»–ã®æ–½è¨­ã§ç«ç½å ±çŸ¥æ©Ÿã‚’æŠ¼ã—ã¦ã„ãŸå¸¸ç¿’æ€§ãŒç¢ºèªã•ã‚ŒãŸã€‚<br>
çŠ¯äººã¯ã€ä»Šå¾Œã‚‚ãƒœã‚¿ãƒ³ã‚’é€£æ‰“ã—ã¦ã„ããŸã„ã¨å‘Šã’ã¦ã„ãŸãƒ»ãƒ»ãƒ»ãƒ»</p>
<p><strong>çŠ¯äººã«ã¯ã¡ã„ã‹ã‚ã‚°ãƒƒã‚ºã®æ²¡åã¨ã€æ¯æœˆã®ãŠå°é£ã„1ä¸‡å††ã®åˆ‘ãŒå®Ÿè¡Œã•ã‚ŒãŸã€‚</strong></p>
`;

let current = 0;
const progress = JSON.parse(localStorage.getItem("detectiveGame")) || {};

const nav = document.getElementById("nav");
const container = document.getElementById("questions");
const truthDiv = document.getElementById("truth");

function save() {
  localStorage.setItem("detectiveGame", JSON.stringify(progress));
}

function renderNav() {
  nav.innerHTML = "";
  data.forEach((_, i) => {
    const btn = document.createElement("button");
    btn.textContent = `å•é¡Œ${i+1}`;
    btn.className = (i===current) ? "active" : "";
    btn.disabled = (i>0 && !progress[i-1]);
    btn.onclick = () => showQuestion(i);
    nav.appendChild(btn);
  });
}

function showQuestion(index) {
  current = index;
  renderNav();
  const d = data[index];
  container.innerHTML = `
    <h2>${d.q}</h2>
    <input type="text" id="ans" placeholder="ã“ã“ã«å…¥åŠ›">
    <button id="checkBtn">ç­”ãˆã‚‹</button>
    <button id="hintBtn">ãƒ’ãƒ³ãƒˆ</button>
    <div id="result"></div>
    <div id="next"></div>
  `;
  const ansInput = document.getElementById("ans");
  const resultDiv = document.getElementById("result");
  const nextDiv = document.getElementById("next");

  if(progress[index]) {
    ansInput.value = progress[index].input;
    displayResult(true, d, resultDiv, nextDiv, index);
  }

  document.getElementById("hintBtn").onclick = () => {
    resultDiv.innerHTML = `<div class="hint">ãƒ’ãƒ³ãƒˆï¼š${d.hint}</div>`;
  };

  document.getElementById("checkBtn").onclick = () => {
    const ans = ansInput.value.trim();
    const isCorrect = d.answer.includes(ans);
    if(isCorrect){
      progress[index] = {input: ans, correct: true};
      save();
      displayResult(true, d, resultDiv, nextDiv, index);
      renderNav();
    } else {
      displayResult(false, d, resultDiv, nextDiv, index);
    }
  };
}

function displayResult(isCorrect, d, resultDiv, nextDiv, index){
  if(isCorrect){
    resultDiv.innerHTML = `
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8d/Red_Circle.svg/1024px-Red_Circle.svg.png" class="icon">
      <div class="next-action">æ¬¡ã«ã‚„ã‚‹ã“ã¨ï¼š${d.next || "ï¼ˆã“ã‚Œã§å…¨ã¦ã®è¬ãŒè§£ã‘ãŸï¼ï¼‰"}</div>
      ${d.criminal ? `<div class="criminal">çŠ¯äººã®æƒ…å ±ï¼š${d.criminal}</div>` : ""}
    `;
    if(index < data.length-1){
      nextDiv.innerHTML = `<button id="nextBtn">æ¬¡ã®å•é¡Œã¸é€²ã‚€</button>`;
      document.getElementById("nextBtn").onclick = () => showQuestion(index+1);
    } else {
      nextDiv.innerHTML = `<button id="truthBtn">çœŸç›¸ã‚’æš´ã</button>`;
      document.getElementById("truthBtn").onclick = () => {
        truthDiv.innerHTML = truthText;
        truthDiv.style.display = "block";
      };
    }
  } else {
    resultDiv.innerHTML = `
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Blue_x.svg/1024px-Blue_x.svg.png" class="icon">
      <div class="hint">ãƒ’ãƒ³ãƒˆï¼š${d.hint}</div>
    `;
  }
}

showQuestion(current);
</script>

</body>
</html>

